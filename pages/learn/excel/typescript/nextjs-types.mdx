import Layout from '../../../../components/learn/Layout'
import Link from 'next/link'

export const meta = {
  title: 'TypeScript',
  courseId: 'excel',
  lessonId: 'typescript',
  stepId: 'nextjs-types',
  subtitle: 'Next.js 内置类型'
}

这里有一些 Next.js 内置类型供你使用。

### 静态生成与服务器端渲染

关于 `getStaticProps`、 `getStaticPaths` 和 `getServerSideProps`，你可以分别使用 `GetStaticProps`、`GetStaticPaths` 和 `GetServerSideProps` 类型:

```ts
import { GetStaticProps, GetStaticPaths, GetServerSideProps } from 'next'

export const getStaticProps: GetStaticProps = async context => {
  // ...
}

export const getStaticPaths: GetStaticPaths = async () => {
  // ...
}

export const getServerSideProps: GetServerSideProps = async context => {
  // ...
}
```

## API Routes

以下是如何将内置类型用于 API Routes 的示例：

```ts
import { NextApiRequest, NextApiResponse } from 'next'

export default (req: NextApiRequest, res: NextApiResponse) => {
  // ...
}
```

## 自定义 `App`

你可以将 `pages/_app.js` 转换为 `pages/_app.tsx` 并使用内置类型 `AppProps`，如下所示:

```tsx
import { AppProps } from 'next/app'

function App({ Component, pageProps }: AppProps) {
  return <Component {...pageProps} />
}

export default App
```

### 转换你的应用程序

要将我们在基础课程中创建的博客应用程序转换为 TypeScript，请更新以下文件:

- `components/date.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/components/date.tsx)，更新到`date.tsx`
- `components/layout.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/components/layout.tsx)，更新到`layout.tsx`
- `lib/posts.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/lib/posts.ts)，更新到`posts.ts`
- `pages/posts/[id].js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/pages/posts/[id].tsx)，更新到`[id].tsx`
- `pages/index.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/pages/index.tsx)，更新到`index.tsx`
- `pages/_app.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/pages/_app.tsx)，更新到`_app.tsx`
- `pages/api/hello.js`:使用[这些代码](https://github.com/vercel/next-learn-starter/blob/master/typescript-final/pages/api/hello.ts)，更新到`hello.ts`

另外，由于 `remark-html` 在包中没有类型定义[DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped),创建顶级`global.d.ts`文件以添加类型声明。

```ts
declare module 'remark-html' {
  const html: any
  export default html
}
```

就是这样! 你的应用程序现在使用 TypeScript 了。

> 了解更多在 Next.js 中使用 TypeScript，查看<Link href="/docs/[[...slug]]" as="/docs/basic-features/typescript"><a>我们的文档</a></Link>。

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
